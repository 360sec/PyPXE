//Compile with dot -Tpng dependencies.dot -o dependencies.png
digraph G {
    graph [layout=fdp overlap=prism splines=false];
    subgraph cluster_key {
            PFH_KEY[label="PROVIDES FILE HANDLE" fillcolor=cornsilk3 style=filled]
            RFH_KEY[label="REQUIRES FILE HANDLE" fillcolor=indianred1 style=filled]
            RES_KEY[label="RESULT" fillcolor=darkolivegreen1 style=filled]
            RESN_KEY[label="RESULT\nCAN BE NULL" fillcolor="darkolivegreen1;0.5:cyan1" style=filled]
            ARG_KEY[label="ARGUMENT" fillcolor=darkorchid1 style=filled]
            PFH_KEY -> RFH_KEY -> RES_KEY -> RESN_KEY -> ARG_KEY;
    }
    subgraph cluster_topstruct {
        color=blue;
        label="Top Level Structs";
        subgraph res {
            node [fillcolor=darkolivegreen1 style=filled];
            subgraph void {
                node [fillcolor="darkolivegreen1;0.5:cyan1"]
                ACCESS4res;
                CLOSE4res;
                COMMIT4res;
                CREATE4res;
                GETATTR4res;
                GETFH4res;
                LOCK4res;
                LOCKT4res;
                LOCKU4res;
                OPEN4res;
                OPEN_DOWNGRADE4res;
                PUTFH4res;
                READ4res;
                READLINK4res;
                READDIR4res;
                RENAME4res;
                SECINFO4res;
                WRITE4res;
                BIND_CONN_TO_SESSION4res;
                EXCHANGE_ID4res;
                CREATE_SESSION4res;
                LAYOUTCOMMIT4res;
                SEQUENCE4res;
                SET_SSV4res;
                TEST_STATEID4res;
            }
            LOOKUP4res;
            LOOKUPP4res;
            NVERIFY4res;
            PUTPUBFH4res;
            PUTROOTFH4res;
            REMOVE4res;
            RESTOREFH4res;
            SAVEFH4res;
            SETATTR4res;
            VERIFY4res;
            BACKCHANNEL_CTL4res;
            DESTROY_SESSION4res;
            FREE_STATEID4res;
            DESTROY_CLIENTID4res;
            RECLAIM_COMPLETE4res;
        }
        subgraph args {
            node [fillcolor=darkorchid1 style=filled];
            CLOSE4args;
            CREATE4args;
            COMMIT4args;
            GETATTR4args;
            LOCK4args;
            LOCKT4args;
            LOCKU4args;
            LOOKUP4args;
            NVERIFY4args;
            OPEN4args;
            OPEN_DOWNGRADE4args;
            PUTFH4args;
            READ4args;
            READDIR4args;
            REMOVE4args;
            RENAME4args;
            SECINFO4args;
            SETATTR4args;
            VERIFY4args;
            WRITE4args;
            BACKCHANNEL_CTL4args;
            BIND_CONN_TO_SESSION4args;
            EXCHANGE_ID4args;
            CREATE_SESSION4args;
            DESTROY_SESSION4args;
            FREE_STATEID4args;
            LAYOUTCOMMIT4args;
            SECINFO_NO_NAME4args;
            SEQUENCE4args;
            SET_SSV4args;
            TEST_STATEID4args;
            DESTROY_CLIENTID4args;
            RECLAIM_COMPLETE4args;
        }
    }
    subgraph cluster_functions {
        color=green
        label="Functions";
        subgraph misc {
            BACKCHANNEL_CTL;
            BIND_CONN_TO_SESSION;
            EXCHANGE_ID;
            CREATE_SESSION;
            DESTROY_SESSION;
            FREE_STATEID;
            SEQUENCE;
            SET_SSV;
            TEST_STATEID;
            DESTROY_CLIENTID;
            RECLAIM_COMPLETE;
        }
        subgraph both_filehandle {
            node [fillcolor="cornsilk3;0.5:indianred1" style=filled];
            GETFH;
            LOOKUP;
            LOOKUPP;
            RESTOREFH;
        }
        subgraph provides_filehandle {
            node [fillcolor=cornsilk3 style=filled];
            CREATE;
            OPEN_DOWNGRADE;
        }
        subgraph requires_filehandle {
            node [fillcolor=indianred1 style=filled];
            ACCESS;
            CLOSE;
            COMMIT;
            GETATTR;
            LOCK;
            LOCKT;
            LOCKU;
            NVERIFY;
            OPEN;
            PUTFH;
            PUTPUBFH;
            PUTROOTFH;
            READ;
            READDIR;
            READLINK;
            REMOVE;
            RENAME;
            SAVEFH;
            SECINFO;
            SETATTR;
            VERIFY;
            WRITE;
            LAYOUTCOMMIT;
            SECINFO_NO_NAME;
        }
    }

    subgraph call {
        subgraph args {
            edge [color=darkorchid3];
            CLOSE4args -> CLOSE;
            COMMIT4args -> COMMIT;
            CREATE4args -> CREATE
            GETATTR4args -> GETATTR;
            LOCK4args -> LOCK;
            LOCKT4args -> LOCKT;
            LOCKU4args -> LOCKU;
            LOOKUP4args -> LOOKUP;
            NVERIFY4args -> NVERIFY;
            OPEN4args -> OPEN;
            OPEN_DOWNGRADE4args -> OPEN_DOWNGRADE;
            PUTFH4args -> PUTFH;
            READ4args -> READ;
            READDIR4args -> READDIR;
            REMOVE4args -> REMOVE;
            RENAME4args -> RENAME;
            SECINFO4args -> SECINFO;
            SETATTR4args -> SETATTR;
            VERIFY4args -> VERIFY;
            WRITE4args -> WRITE;
            BACKCHANNEL_CTL4args -> BACKCHANNEL_CTL;
            BIND_CONN_TO_SESSION4args -> BIND_CONN_TO_SESSION;
            EXCHANGE_ID4args -> EXCHANGE_ID;
            CREATE_SESSION4args -> CREATE_SESSION;
            DESTROY_SESSION4args -> DESTROY_SESSION;
            FREE_STATEID4args -> FREE_STATEID;
            LAYOUTCOMMIT4args -> LAYOUTCOMMIT;
            SECINFO_NO_NAME4args -> SECINFO_NO_NAME;
            SEQUENCE4args -> SEQUENCE;
            SET_SSV4args -> SET_SSV;
            TEST_STATEID4args -> TEST_STATEID;
            DESTROY_CLIENTID4args -> DESTROY_CLIENTID;
            RECLAIM_COMPLETE4args -> RECLAIM_COMPLETE;
        }
        subgraph res {
            edge [color=darkolivegreen4];
            ACCESS -> ACCESS4res[dir=both];
            CLOSE4res -> CLOSE;
            COMMIT -> COMMIT4res;
            CREATE -> CREATE4res;
            GETATTR -> GETATTR4res;
            GETFH -> GETFH4res;
            LOCK -> LOCK4res;
            LOCKT -> LOCKT4res;
            LOCKU -> LOCKU4res;
            LOOKUP -> LOOKUP4res;
            LOOKUPP -> LOOKUPP4res;
            NVERIFY -> NVERIFY4res;
            OPEN -> OPEN4res;
            OPEN_DOWNGRADE -> OPEN_DOWNGRADE4res;
            PUTFH -> PUTFH4res;
            PUTPUBFH -> PUTPUBFH4res;
            PUTROOTFH -> PUTROOTFH4res;
            READ -> READ4res;
            READDIR -> READDIR4res;
            READLINK -> READLINK4res;
            REMOVE -> REMOVE4res;
            RENAME -> RENAME4res;
            RESTOREFH -> RESTOREFH4res
            SAVEFH -> SAVEFH4res;
            SECINFO -> SECINFO4res;
            SETATTR -> SETATTR4res;
            VERIFY -> VERIFY4res;
            WRITE -> WRITE4res;
            BACKCHANNEL_CTL -> BACKCHANNEL_CTL4res
            BIND_CONN_TO_SESSION -> BIND_CONN_TO_SESSION4res;
            EXCHANGE_ID -> EXCHANGE_ID4res;
            CREATE_SESSION -> CREATE_SESSION4res;
            DESTROY_SESSION -> DESTROY_SESSION4res;
            FREE_STATEID -> FREE_STATEID4res;
            LAYOUTCOMMIT -> LAYOUTCOMMIT4res;
            SECINFO_NO_NAME -> SECINFO4res;
            SEQUENCE -> SEQUENCE4res;
            SET_SSV -> SET_SSV4res;
            TEST_STATEID -> TEST_STATEID4res;
            DESTROY_CLIENTID -> DESTROY_CLIENTID4res;
            RECLAIM_COMPLETE -> RECLAIM_COMPLETE4res;
        }
    }
    CREATE -> GETFH[color=orange];
    OPEN -> GETFH[color=orange];

    subgraph cluster_basestruct {
        color=purple;
        label="Base Structs";
        edge [color=purple];
    }
}
